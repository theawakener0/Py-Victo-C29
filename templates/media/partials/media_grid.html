{% if media_items %}
    {% for media in media_items %}
    <div class="media-card group bg-black/50 backdrop-blur-xl rounded-2xl overflow-hidden shadow-lg border border-white/10 hover:shadow-xl">
        <!-- Media Preview -->
        <a href="{{ media.post.get_absolute_url }}" 
           hx-get="{{ media.post.get_absolute_url }}"
           hx-target="body"
           hx-swap="outerHTML"
           hx-push-url="true"
           class="block relative overflow-hidden">
            {% if media.media_type == 'image' %}
                <img src="{{ media.url }}" 
                     alt="{{ media.title|default:'Image' }}"
                     class="media-thumbnail w-full h-48 object-cover transition-transform duration-300 group-hover:scale-105"
                     loading="lazy">
                <div class="absolute top-3 left-3">
                    <span class="inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-blue-500/90 text-white backdrop-blur-sm">
                        <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                        </svg>
                        Image
                    </span>
                </div>
            {% else %}
                <!-- Video thumbnail or placeholder -->
                {% if media.thumbnail %}
                    <img src="{{ media.thumbnail }}" 
                         alt="{{ media.title|default:'Video' }}"
                         class="media-thumbnail w-full h-48 object-cover transition-transform duration-300 group-hover:scale-105"
                         loading="lazy">
                {% else %}
                    <div class="media-thumbnail w-full h-48 bg-gradient-to-br from-sage-700 to-sage-900 flex items-center justify-center">
                        <svg class="w-16 h-16 text-sage-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                        </svg>
                    </div>
                {% endif %}
                <!-- Play button overlay for videos -->
                <div class="absolute inset-0 flex items-center justify-center bg-black/20 transition-opacity duration-300 group-hover:bg-black/30">
                    <div class="w-14 h-14 rounded-full bg-white/90 flex items-center justify-center shadow-lg transform transition-transform duration-300 group-hover:scale-110">
                        <svg class="w-6 h-6 text-sage-800 ml-1" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M8 5v14l11-7z"></path>
                        </svg>
                    </div>
                </div>
                <div class="absolute top-3 left-3">
                    <span class="inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-red-500/90 text-white backdrop-blur-sm">
                        <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                        </svg>
                        Video
                    </span>
                </div>
            {% endif %}
        </a>
        
        <!-- Media Info -->
        <div class="p-4">
            <h3 class="text-sm font-medium text-cream-100 line-clamp-1 mb-2">
                {{ media.title|default:"Untitled" }}
            </h3>
            <div class="flex items-center justify-between text-xs text-sage-400">
                <span>From: <a href="{{ media.post.get_absolute_url }}"
                              hx-get="{{ media.post.get_absolute_url }}"
                              hx-target="body"
                              hx-swap="outerHTML"
                              hx-push-url="true"
                              class="text-cream-300 hover:underline">{{ media.post.title|truncatewords:5 }}</a></span>
                <span>{{ media.created_at|date:"M j, Y" }}</span>
            </div>
        </div>
    </div>
    {% endfor %}
{% else %}
    <div class="col-span-full">
        <div class="text-center py-20">
            <div class="inline-flex items-center justify-center w-24 h-24 rounded-full bg-black/50 mb-6">
                <svg class="w-12 h-12 text-sage-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                </svg>
            </div>
            <h3 class="text-xl font-serif text-cream-100 mb-2">No media found</h3>
            <p class="text-sage-400 max-w-sm mx-auto">
                {% if current_filter or current_search %}
                    No media matches your filters. Try adjusting your search criteria.
                {% else %}
                    Media from posts will appear here automatically when images or videos are added to posts.
                {% endif %}
            </p>
        </div>
    </div>
{% endif %}
