{% extends "base.html" %}
{% load static %}

{% block extra_head %}
<style>
    #Main {
        position: relative;
    }
    #Main::before {
        content: '';
        position: absolute;
        inset: 0;
        background-image: url('{% static "VictoBackground.jpg" %}');
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        background-attachment: fixed;
        filter: blur(4px);
        -webkit-mask-image: linear-gradient(to bottom, rgba(0, 0, 0, 1) 55%, rgba(0, 0, 0, 0) 100%);
        mask-image: linear-gradient(to bottom, rgba(0, 0, 0, 1) 55%, rgba(0, 0, 0, 0) 100%);
        opacity: 0.6;
        z-index: 0;
    }
    #Main::after {
        content: '';
        position: absolute;
        inset: 0;
        background: linear-gradient(180deg, rgba(0, 0, 0, 0.88) 0%, rgba(0, 0, 0, 0.65) 50%, rgba(0, 0, 0, 0.3) 78%, rgba(0, 0, 0, 0) 100%);
        pointer-events: none;
        z-index: 0;
    }
    #Main .main-inner {
        position: relative;
        z-index: 1;
    }
    @media (max-width: 1024px) {
        #Main::before {
            background-attachment: scroll;
        }
    }
</style>
{% endblock %}

{% block content %}
<div id="Main" class="animate-fade-in">
    <div class="main-inner container mx-auto px-6 py-16">
        <div class="flex justify-center">
            <div class="w-full md:w-10/12 lg:w-8/12 max-w-4xl">
                <div class="text-center mb-16 animate-slide-up">
                    <p class="uppercase tracking-[0.3em] text-xs md:text-sm text-lavender-300 mb-4">Cuncti Gens Una Sumus · We Are All One People</p>
                    <h1 class="hero-title text-5xl md:text-6xl lg:text-7xl font-serif font-light bg-gradient-to-r from-cream-100 via-cream-200 to-cream-100 bg-clip-text text-transparent mb-6 leading-tight">Victoria College C'29 Student Union</h1>
                    <p class="text-lg md:text-xl text-cream-300 font-light max-w-3xl mx-auto leading-relaxed">Representing the 2029 cohort of Alexandria's historic Victoria College—where generations of thinkers, artists, diplomats, and innovators have shared classrooms since 1902. We honor that heritage by building community, elevating student voice, and preparing the next chapter together.</p>
                    <div class="cta-cluster flex flex-col sm:flex-row items-center justify-center gap-4 mt-8">
                        <a href="#initiatives" class="inline-flex items-center bg-gradient-to-r from-gray-600 to-gray-700 text-white font-medium px-6 py-3 rounded-full shadow-md hover:shadow-lg hover:scale-[1.02] transition-all duration-200">
                            Explore Initiatives
                        </a>
                        <a href="{% url 'posts' %}" class="inline-flex items-center text-cream-100 font-medium px-6 py-3 rounded-full border border-white/15 hover:bg-white/5 hover:border-white/25 hover:scale-[1.02] transition-all duration-200">
                            View Latest Updates
                        </a>
                        <a href="{% url 'legacy' %}" class="inline-flex items-center text-cream-100 font-medium px-6 py-3 rounded-full border border-lavender-400/30 hover:bg-lavender-400/10 hover:border-lavender-400/50 hover:scale-[1.02] transition-all duration-200">
                            Explore Our Legacy
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container mx-auto px-6 py-16">
    <div class="flex justify-center">
        <div class="w-full md:w-10/12 lg:w-8/12 max-w-4xl">
            <div id="about" class="bg-black/50 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/10 p-10 md:p-12 mb-16 hover:border-white/15 transition-all duration-300">
                <h2 class="text-3xl md:text-4xl font-serif font-light text-cream-100 mb-6">Who We Are</h2>
                <p class="mb-5 text-cream-300 leading-relaxed text-lg">Rooted on El Iqbal Street and guided by over a century of scholarship, the Victoria College Student Union for the Class of 2029 stands on the shoulders of alumni who helped shape culture, diplomacy, and the arts across the region. Our union connects that legacy to today's learners.</p>
                <ul class="space-y-3 text-cream-300 text-lg leading-relaxed">
                    <li class="flex items-start"><span class="mt-2 mr-3 h-2 w-2 rounded-full bg-lavender-400 flex-shrink-0"></span>Championing every student voice through councils, open forums, and collaborative decision-making.</li>
                    <li class="flex items-start"><span class="mt-2 mr-3 h-2 w-2 rounded-full bg-lavender-400 flex-shrink-0"></span>Curating programs that balance academic rigor with wellbeing, creative expression, and service across Alexandria.</li>
                    <li class="flex items-start"><span class="mt-2 mr-3 h-2 w-2 rounded-full bg-lavender-400 flex-shrink-0"></span>Celebrating the College's motto—<em>Cuncti Gens Una Sumus</em>—by welcoming diverse backgrounds into one shared community.</li>
                </ul>
            </div>

            <section id="initiatives" class="mb-16">
                <h2 class="text-3xl font-serif font-light text-cream-100 mb-6 text-center">Union Pillars for 2025‑2026</h2>
                <p class="text-center text-cream-400 mb-10 max-w-3xl mx-auto">Each pillar is stewarded by classmates across houses and disciplines, ensuring that every corner of Victoria College is represented in the work we undertake this academic year.</p>
                <div class="auto-grid gap-6">
                    <article class="bg-black/40 backdrop-blur-sm border border-white/10 rounded-xl p-8 shadow-lg hover:shadow-xl hover:border-white/15 transition-all duration-300 hover:-translate-y-1">
                        <h3 class="text-2xl font-serif font-semibold text-cream-100 mb-3">Scholastic Endeavour</h3>
                        <p class="text-cream-300 leading-relaxed">Peer-led study salons, mentorship for IGCSE and IB cohorts, and academic partnerships that bridge alumni expertise with student goals.</p>
                    </article>
                    <article class="bg-black/40 backdrop-blur-sm border border-white/10 rounded-xl p-8 shadow-lg hover:shadow-xl hover:border-white/15 transition-all duration-300 hover:-translate-y-1">
                        <h3 class="text-2xl font-serif font-semibold text-cream-100 mb-3">Community &amp; Service</h3>
                        <p class="text-cream-300 leading-relaxed">Citywide outreach with Alexandrian schools, coastal clean-up drives, and fundraising that responds to the needs of our neighbours.</p>
                    </article>
                    <article class="bg-black/40 backdrop-blur-sm border border-white/10 rounded-xl p-8 shadow-lg hover:shadow-xl hover:border-white/15 transition-all duration-300 hover:-translate-y-1">
                        <h3 class="text-2xl font-serif font-semibold text-cream-100 mb-3">Culture &amp; Legacy</h3>
                        <p class="text-cream-300 leading-relaxed">Showcasing music, theatre, and debate inspired by the College's storied alumni—from celebrated directors to global diplomats.</p>
                    </article>
                </div>
            </section>

            <h2 class="text-3xl font-serif font-light text-cream-100 mb-6 text-center">Media Room</h2>
            <p class="text-center text-cream-400 mb-8">Catch highlights from assemblies, campaigns, and creative labs in the <a href="{% url 'videos' %}" class="text-lavender-300 hover:text-lavender-200 underline underline-offset-4 transition-colors">full media library</a>.</p>
            <div id="blog-videos-container" class="space-y-6 mb-16 stack-xl">
                {% for video in videos.Videos %}
                <article class="bg-black/50 backdrop-blur-lg rounded-xl p-8 shadow-lg border border-white/10 hover:shadow-xl hover:border-white/15 transition-all duration-300 hover:-translate-y-1 group">
                    <h3 class="text-2xl font-serif font-medium text-cream-100 mb-4 leading-snug group-hover:text-lavender-300 transition-colors">{{ video.title }}</h3>
                    {% if video.image %}
                    <div class="overflow-hidden rounded-lg mb-4">
                        <img src="{{ video.image }}" alt="{{ video.title }}" class="w-full rounded-lg shadow-md group-hover:scale-105 transition-transform duration-500" style="max-height: 300px; object-fit: cover;">
                    </div>
                    {% endif %}
                    <a href="{{ video.url }}" target="_blank" class="inline-flex items-center text-lavender-300 hover:text-lavender-200 font-medium transition-all group-hover:gap-3 gap-2">
                        <svg class="w-5 h-5 group-hover:scale-110 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"/>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                        <span class="underline underline-offset-4">Watch Video</span>
                    </a>
                    {% if can_publish_media %}
                    <div class="mt-6 flex flex-wrap gap-3">
                        <a href="{% url 'video_edit' video.id %}" class="inline-flex items-center px-4 py-2 text-sm font-medium rounded-full border border-white/15 text-cream-200 hover:bg-white/5 transition-all duration-200">
                            Edit
                        </a>
                        <form method="post" action="{% url 'video_delete' video.id %}" onsubmit="return confirm('Delete this video highlight?');">
                            {% csrf_token %}
                            <button type="submit" class="inline-flex items-center px-4 py-2 text-sm font-medium rounded-full border border-red-500/30 text-red-400 hover:bg-red-500/10 transition-all duration-200">
                                Delete
                            </button>
                        </form>
                    </div>
                    {% endif %}
                </article>
                {% endfor %}

                {% if videos.Videos|length == 0 %}
                <div class="bg-black/30 backdrop-blur-sm border border-dashed border-white/20 text-cream-400 text-center rounded-xl p-12 mb-12 hover:border-white/30 transition-all duration-300" role="alert">
                    <svg class="w-20 h-20 mx-auto mb-4 text-cream-500 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                    </svg>
                    <p class="text-xl font-serif font-light mb-2 text-cream-200">No media yet</p>
                    <p class="text-cream-500">Spotlight the first Class of '29 moment by submitting a highlight reel.</p>
                </div>
                {% endif %}
            </div>

            <h2 class="text-3xl font-serif font-light text-cream-100 mb-6 text-center">Union Voices</h2>
            <p class="text-center text-cream-400 mb-8">Read briefs from council committees and classmates in the <a href="{% url 'posts' %}" class="text-lavender-300 hover:text-lavender-200 underline underline-offset-4 transition-colors">updates archive</a>.</p>
            <div id="blog-posts-container" class="space-y-6 stack-xl">
                {% for post in posts.Posts %}
                <article class="bg-black/50 backdrop-blur-lg rounded-xl p-8 shadow-lg border border-white/10 hover:shadow-xl hover:border-white/15 transition-all duration-300 hover:-translate-y-1 group">
                    <h3 class="text-2xl font-serif font-medium text-cream-100 mb-3 leading-snug group-hover:text-lavender-300 transition-colors">{{ post.title }}</h3>
                    <p class="text-cream-500 text-sm font-light tracking-wide mb-2 flex items-center">
                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                        </svg>
                        {{ post.date }}
                    </p>
                    <p class="text-cream-300 whitespace-pre-line">{{ post.content }}</p>
                    {% if can_publish_media %}
                    <div class="mt-6 flex flex-wrap gap-3">
                        <a href="{% url 'post_edit' post.id %}" class="inline-flex items-center px-4 py-2 text-sm font-medium rounded-full border border-white/15 text-cream-200 hover:bg-white/5 transition-all duration-200">
                            Edit
                        </a>
                        <form method="post" action="{% url 'post_delete' post.id %}" onsubmit="return confirm('Delete this bulletin?');">
                            {% csrf_token %}
                            <button type="submit" class="inline-flex items-center px-4 py-2 text-sm font-medium rounded-full border border-red-500/30 text-red-400 hover:bg-red-500/10 transition-all duration-200">
                                Delete
                            </button>
                        </form>
                    </div>
                    {% endif %}
                </article>
                {% endfor %}

                {% if posts.Posts|length == 0 %}
                <div class="bg-black/30 backdrop-blur-sm border border-dashed border-white/20 text-cream-400 text-center rounded-xl p-12 hover:border-white/30 transition-all duration-300" role="alert">
                    <svg class="w-20 h-20 mx-auto mb-4 text-cream-500 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                    </svg>
                    <p class="text-xl font-serif font-light mb-2 text-cream-200">Your bulletin awaits</p>
                    <p class="text-cream-500">Submit the next council report or class announcement.</p>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
